<#include "../_layout.html" />
<@layout>

<table id="problem-list" class="table table-striped table-bordered" cellpadding="0" cellspacing="0" border="0" width="100%">
  <thead>
    <tr>
      <th>ID</th>
      <th>Title</th>
      <th>AC</th>
      <th>Submit</th>
      <th>Date</th>
    </tr>
  </thead>
  <tbody>
  </tbody>
</table>

<script type="text/javascript" src="assets/js/placeholders.min.js"></script>

<link href="assets/DataTables-1.9.4/media/css/jquery.dataTables.css" type="text/css" rel="stylesheet">
<script type="text/javascript" src="assets/DataTables-1.9.4/media/js/jquery.dataTables.js"></script>
<script type="text/javascript" src="assets/js/dataTables.bootstrap.js"></script>
<script type="text/javascript" charset="utf-8">
     var oTable = $('#problem-list').dataTable({
        "sPaginationType": "bootstrap",
        "bServerSide": true,
        "iDisplayLength": 25,
        "sAjaxSource": "${baseUrl!}/api/admin/problemList",
        'sAjaxDataProp' : "list", // 服务端返回数据的json节点
        "aoColumns": [
            { "mData": "pid" },
            { "mData": "title" },
            { "mData": "accept" },
            { "mData": "submit" },
            { "mData": "ctime" }
        ],
        "oLanguage": {
           "sUrl": "assets/DataTables-1.9.4/zh_CN.json"
        },
        "fnServerData": function ( sSource, aoData, fnCallback, oSettings ) {
          oSettings.jqXHR = $.ajax( {
            "dataType": 'json',
            "type": "POST",
            "url": sSource,
            "data": aoData,
            "success": function(result) {
                  result.iTotalRecords = result.totalRow;
                  result.iTotalDisplayRecords = result.totalRow;
                  fnCallback(result);
                }
          } );
        }
    });
</script>

</@layout>
