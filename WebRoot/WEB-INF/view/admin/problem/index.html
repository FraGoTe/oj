<#include "../_layout.html" />
<@layout>
    <div class="header">
      <h1 class="page-title">题目列表</h1>
    </div>
    <ul class="breadcrumb">
      <li class="active">题目管理</li>
    </ul>
    <div class="container-fluid">
      <div class="row-fluid">
        <div class="well">
          <div id="container">
						<table id="problem-list" class="table table-striped table-bordered" cellpadding="0" cellspacing="0" border="0" width="100%">
						  <thead>
						    <tr>
						      <th>ID</th>
						      <th>Title</th>
						      <th>AC</th>
						      <th>Submit</th>
						      <th>Date</th>
						      <th>Action</th>
						    </tr>
						  </thead>
						  <tbody>
						  </tbody>
						</table>
						
						<script type="text/javascript" src="assets/js/placeholders.min.js"></script>
						
						<link href="assets/DataTables-1.9.4/media/css/jquery.dataTables.css" type="text/css" rel="stylesheet">
						<script type="text/javascript" src="assets/DataTables-1.9.4/media/js/jquery.dataTables.js"></script>
						<script type="text/javascript" src="assets/js/dataTables.bootstrap.js"></script>
						<script type="text/javascript" charset="utf-8">
						    var oTable = $('#problem-list').dataTable({
						        "sPaginationType": "bootstrap",
						        "bServerSide": true,
						        "iDisplayLength": 25,
						        "sAjaxSource": "${baseUrl!}/api/admin/problemList",
						        'sAjaxDataProp' : "list", // 服务端返回数据的json节点
						        "aoColumns": [
						            { "mData": "pid",
						              "mRender": function (data, type, full) {
						                return '<a href="admin/problem/' + full.pid + '">' + data + '</a>';
						              }
						            },
						            { "mData": "title",
						              "mRender": function (data, type, full) {
						                return '<a href="problem/show/' + full.pid + '" target="_blank">' + data + '</a>';
						              }
						            },
						            { "mData": "accept",
						              "mRender": function (data, type, full) {
						                return '<a href="status/?pid=' + full.pid + '&result=0" target="_blank">' + data + '</a>';
						              }
						            },
						            { "mData": "submit",
						              "mRender": function (data, type, full) {
						                return '<a href="status/?pid=' + full.pid + '" target="_blank">' + data + '</a>';
						              }
						            },
						            { "mData": "ctime" },
						            { "mData": null,
						              "bSortable": false,
						              "mRender": function (data, type, full) {
						                var action = '<button id="problem-edit" pid="' + full.pid 
						                    + '" class="btn btn-success">Edit</button> '
						                    + '<button id="problem-toggle" pid="' + full.pid 
						                    + '" class="btn btn-warning">' 
						                    + (full.status ? 'Delete' : 'Resume')
						                    + '</button> ';
						                return action;
						              }
						            }
						        ],
						        "oLanguage": {
						           "sUrl": "assets/DataTables-1.9.4/zh_CN.json"
						        },
						        "fnServerData": function ( sSource, aoData, fnCallback, oSettings ) {
						          oSettings.jqXHR = $.ajax( {
						            "dataType": 'json',
						            "type": "POST",
						            "url": sSource,
						            "data": aoData,
						            "success": function(result) {
						                  result.iTotalRecords = result.totalRow;
						                  result.iTotalDisplayRecords = result.totalRow;
						                  fnCallback(result);
						                }
						          } );
						        }
						    });
						</script>
          </div>
        </div>
      </div>
    </div>
</@layout>
